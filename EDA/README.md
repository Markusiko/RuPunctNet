# EDA

В ходе разведочного анализа данных были просмотрены собранные тексты из Википедии (все на 23 октября) и книг (14 случайных книг).

## Википедия
Сами тексты можно найти по [данной ссылке](https://drive.google.com/file/d/1buokuh3h01KwE5iobVantH6YF_yR0vyX/view?usp=sharing).

* Сам объем данных довольно большой: 14 миллионов абзацев и около 500 миллионов меток (36 меток на абзац).  Полнота текстов, гипотетически, гарантирует высокое качества обучения. Однако, ограниченность в ресурсах не позволит
использовать весь оъем данных.

* В текстах присутствует дисбаланс меток (как и в статьях, на которые мы ссылаемся). После 82\% слов не следует никаких знаков препинания.
Самыми популярными пуктуационными знаками в Википедии являются запятая, точка и тире. Наименее популярны восклицательные и вопросительные знаки, а также многоточия. На Википедии содержатся в большинстве статьи,
 а различные интонации публицистическому стилю не свойственны (поэтому добавляем худ. литературу в обучении).

* В данных преобладают короткие предложения: половина абзацев содержит не более 26 слов. Большая часть абзацев содержит в себе не более 2500 символов, чего в принципе должно хватить для использования, например, Берта.

## Книги

* В книгах дисбаланс классов смещается - доля запятых  среди всех знаков в книгах увеличилась на +6.0пп. 
* Начали появляться эмоциональные знаки (? и !) +0.4пп
* Стало меньше слов без знаков - с 82% до 79% по сравнению с вики 
* Объем 28 тысяч абзацев, меток 1.3 млн (46 меток на абзац) => В книгах тексты длиннее, но есть и короткие.
* Средняя длина абзаца составила 46 предложений

## Итоги 

* В ходе разведочного анализа данных были обнаружены и обработаны ошибки в данных: различные технические символы, сочетания
* Для бейзлайна обучения, принято фильтровать сочетания знаков - {",-}, {)-} и их сородичей. 
* Некоторую инфографику по данным можно найти в папке `pictures/`.

| Метка | Вики  | Книги | Разница с Вики |
|------|-------|-------|---------------|
| ,    | 7,4%  | 13,3% | 6,0%          |
| ?    | 0,0%  | 0,4%  | 0,4%          |
| ;    | 0,2%  | 0,6%  | 0,4%          |
| !    | 0,0%  | 0,4%  | 0,4%          |
| ...  | 0,0%  | 0,2%  | 0,2%          |
| :    | 0,3%  | 0,3%  | 0,0%          |
| —    | 1,2%  | 0,7%  | -0,5%         |
| )    | 0,6%  | 0,1%  | -0,6%         |
| "    | 0,8%  | 0,1%  | -0,7%         |
| .    | 7,2%  | 5,2%  | -2,0%         |
| o    | 82,3% | 78,7% | -3,6%         |

Финальная разметка была сформирована после анализа данных с помощью файла  `create_markup.ipynb`. Train, Validation, Test были выложены на [Гугл-диск](https://drive.google.com/file/d/1Hk-iVA8YFoKozHc79463z7JMI3x8EtZE/view?usp=sharing). Статистика по меткам в них приведена в том же ноутбуке. В дальнейшем разметка может быть уменьшена, так как сейчас размер `train.csv` составляет более 800 Мб.

